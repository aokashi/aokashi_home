+++
date = "2018-04-18T00:00:00+09:00"
title = "目次のリンクが機能しない不具合について"
+++
現在、Aokashi Homeの一部ページで目次のリンクが機能しない不具合が発生しております。

### 問題のあるページ一覧
- 素材の各ページ
  - [WWA素材](/materials/wwa.html)
  - [アイコン素材](/materials/icon.html)
  - [RPGツクールMV対応素材](/materials/tkool_mv.html)
- [WWAのJavaアプレットを動かすための説明ページ](/wwa/java_setting.html)
- [Portable Launcherのページ](/software/portable_launcher.html)
- [過去のサイト](/aboutme/site.html)
- **お知らせの各ページ**
  - お知らせの一覧ページは目次が表示されないため対象外です。
  - このページも対象です。
- [当サイトについて](/about.html)

主に、ページのURLの末尾に `.html` と付いていて、目次に項目があるページが対象です。

#### 問題の内容
目次のリンクをクリック(タップ)すると、違うページが表示されたり、403エラーが表示されたりします。

このページの目次の各項目も、リンクをクリックすると403エラーのページが表示されます。

### 原因
現時点では、このWebサイトの生成に利用している[Hugo](https://gohugo.io)の不具合だと思われます。

目次を生成する `{{.TableOfContents}}` で生成される目次のリンクは、URLが `.html` で終わらないページでは正常にURLを出力できますが、 `.html` と付いているページは正常にURLが出力されません。ページのファイル名の部分が消えた状態で出力されてしまいます。

### 対策
`.html` の付く各ページのURLを変更し、全てのページに `.html` が付かないページにします。

URLの変更が伴うため、リンク切れを起こす可能性があります。また、今後URLの決め方を変える予定があります。このため、修正する時には大掛かりな形でURLを変えていただく予定でいます。

しかし、実施にはかなり時間が掛かる上に、このまま不具合のあるリンクを残すわけには行きませんので、**目次の利用を一旦停止します**。停止は土曜日の4月21日を予定しています。

- 2018年4月22日追記: 目次の機能は一部ページを除き一旦停止しました。