---
path: /portfolio/wwa_wing_pe
template: portfolio-item
title: WWA Wing PE
date: "2017-12-09"
season: college
tags:
  - WWA
  - ゲームエンジン
images:
  - path: /portfolio/wwa_wing_pe/wwawing_pe_font.png
    alt: font プロパティを使用して文字を描画した例
    description: フォントを描画するように設定を加えた画面です。
links:
  - link: https://twitter.com/aokashi/status/981893803362496513
    name: イメージを動かす機能を活用した例 (自分の Twitter ツイート)
words:
  - wwa
---

[WWA Wing の開発](/portfolio/wwa_wing/) を通じ、新しい拡張機能を開発していました。

## 開発の経緯

きっかけは、ヒラリラーが WWA Wing の拡張機能である [WWA Wing XE](https://github.com/hirarira/WWAWingXE) を開発したことでした。

実は、 WWA は WWA Wing として JavaScript に移植される前のところでは **拡張機能** が使用できるようになっていました。拡張機能を使用することで、本来ゲーム制作では使用できないプログラミングの変数や条件分岐を使用することが可能で、この拡張機能をきっかけに表現豊かなゲーム作品や、自由度の高いゲーム作品が作られるようになりました。

また、拡張機能を活用したシステムとして、プログラミングの変数や条件分岐、グラフィック描画機能を提供する **WWAeval** が公開されました。ただし、 WWA と同様に Java 言語で記述されている Java アプレットのため、移植が必要になりました。

前者のプログラミングの変数や条件分岐は WWA Wing XE を担うことになりました。後者のグラフィック描画機能を担当する拡張機能があっても良いのではないかと思い、開発を始めました。

## 内容

WWA Wing PE は WWA Wing をベースに、ピクチャを表示するための特定の文字列をメッセージに加えることで、ピクチャを表示させたり、動かしたりできるように開発しました。

表示できる内容は単純にイメージを表示するだけでなく、テキストを表示させたり、アニメーションでイメージを動かしたり、画面全体をフェードインやフェードアウトをさせたりすることができます。これらの機能を活用することで、下記のような演出が期待できます。

- 攻撃のエフェクト演出 (無くても実現できたが、1マス毎にパーツの配置と削除を行う必要があって大変手間がかかっていた)
- 街に入った場合に街の名前を一定時間表示する
- 劇イベント (例えば、画面が暗くなったり・・・)

これは、元となった WWAeval の機能を参考にしています。

## 問題点

しかしながら、開発を進めると、画像を表示したり動かしたりするため、座標といった WWA Wing の基礎部分の改修が必要になりました。

WWA Wing PE は WWA Wing をフォークしたものなので、自由に改修しても WWA Wing には影響を受けず、気にする必要は無いと言えば無いのですが、WWA Wing PE で追加された機能を WWA Wing にも取り入れる予定がありました。また、 WWA Wing ではリファクタリングの作業を進めていました。

そこで基礎部分の改修を行うと、 WWA Wing のリファクタリングと干渉することになりました。

このままではちゃんとした形で完成することが難しく、開発は中止になりました。

ただ、今回の開発を通じて、文字列から処理を判定する文字列解析が開発できたいい機会でした。

今後は [WWA Wing の開発](/portfolio/wwa_wing) で説明されている「全く新しいゲームシステムの開発」のところで WWA Wing PE と同様の機能を加えようと考えています。
